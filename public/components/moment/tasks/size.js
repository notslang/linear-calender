function getVersion(e,t){var a="",n=https.request({host:"raw.github.com",port:443,path:"/timrwood/moment/"+e},function(e){e.setEncoding("utf8"),e.on("data",function(e){a+=e}),e.on("end",function(){zlib.gzip(a,function(e,n){t(a.length,n.length)})})});n.on("error",function(e){console.log("problem with request: "+e.message)}),n.end()}function printDiffs(e,t,a,n){var _=a-e,s=n-t;console.log("Filesize difference from current branch to "+stable),console.log(stable+"   "+e+" / "+t),console.log("curr    "+a+" / "+n),console.log("diff    "+(_>0?"+":"")+_),console.log("gzip    "+(s>0?"+":"")+s)}var https=require("https"),zlib=require("zlib"),path=require("path"),fs=require("fs"),stable="1.7.1",done;module.exports=function(e){e.registerTask("size","Check the codebase filesize against the latest stable version.",function(){done=this.async(),fs.readFile(path.normalize(__dirname+"/../min/moment.min.js"),"utf8",function(e,t){if(e)throw e;zlib.gzip(t,function(e,a){getVersion(stable+"/min/moment.min.js",function(e,n){printDiffs(e,n,t.length,a.length),done()})})})})};