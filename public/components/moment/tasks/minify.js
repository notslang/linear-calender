var fs=require("fs"),uglifyjs=require("uglify-js");module.exports=function(e){function a(e){var a,t,n="";for(a=0;e.length>a;++a)t=e[a],n+="comment1"===t.type?"//"+t.value+"\n":"/*"+t.value+"*/";return n}e.registerMultiTask("minwithcomments","Minify lang files with UglifyJS.",function(){var t,n,_,s=e.file.expandFiles(this.file.src);return n=e.helper("concat",s,{separator:this.data.separator}),_=uglifyjs.parser.tokenizer(n),t=a(_().comments_before),t+=e.helper("uglify",n,e.config("uglify")),e.file.write(this.file.dest,t),this.errorCount?!1:(e.log.writeln('File "'+this.file.dest+'" created.'),e.helper("min_max_info",t,n),void 0)})};